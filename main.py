import streamlit as st
import random
import time

# --- ページ設定 ---
st.set_page_config(
    page_title="Classic Tarot",
    page_icon="🃏",
    layout="centered"
)

# --- タイトル ---
st.title("🃏 タロット占い（クラシック版）")
st.markdown("心を落ち着けて、ボタンを押してください。運命のカードが示されます。")

# --- カードのデータ（AIを使わず、ここに辞書として持っておく） ---
TAROT_DATA = {
    "0. 愚者": "【意味】始まり、自由、純粋、冒険\n【アドバイス】心のままに新しい一歩を踏み出しましょう。",
    "1. 魔術師": "【意味】創造、自信、スキルの発揮\n【アドバイス】あなたには十分な能力があります。自信を持って。",
    "2. 女教皇": "【意味】知性、直感、静寂\n【アドバイス】焦らず、自分の内なる声に耳を傾けてください。",
    "3. 女帝": "【意味】豊かさ、母性、繁栄\n【アドバイス】周囲への感謝と愛を大切にすることで運が開けます。",
    "4. 皇帝": "【意味】責任、安定、リーダーシップ\n【アドバイス】感情に流されず、意志を強く持って決断しましょう。",
    "5. 法王": "【意味】慈悲、信頼、伝統\n【アドバイス】信頼できる人の助言を求めると良いでしょう。",
    "6. 恋人": "【意味】選択、愛、調和\n【アドバイス】直感を信じて、心がワクワクする方を選びましょう。",
    "7. 戦車": "【意味】勝利、前進、行動力\n【アドバイス】迷わず突き進むべき時です。勢いを大切に。",
    "8. 力": "【意味】忍耐、勇気、優しさ\n【アドバイス】力づくではなく、粘り強さと優しさで乗り越えられます。",
    "9. 隠者": "【意味】内省、真理の探究\n【アドバイス】一人静かに考える時間を持ちましょう。",
    "10. 運命の輪": "【意味】チャンス、一時的な幸運\n【アドバイス】流れに身を任せることで、事態は好転します。",
    "11. 正義": "【意味】公平、誠実、バランス\n【アドバイス】感情を挟まず、客観的に判断することが大切です。",
    "12. 吊るされた男": "【意味】試練、忍耐、視点を変える\n【アドバイス】今は動かず、別の角度から物事を見てみましょう。",
    "13. 死神": "【意味】終わりと始まり、変化\n【アドバイス】執着を手放すことで、新しい道が開かれます。",
    "14. 節制": "【意味】調和、バランス、自制\n【アドバイス】極端な行動は避け、穏やかさを保ちましょう。",
    "15. 悪魔": "【意味】誘惑、束縛\n【アドバイス】悪い習慣や甘い誘惑に注意してください。",
    "16. 塔": "【意味】崩壊、予期せぬ変化\n【アドバイス】変化を恐れず、ゼロからやり直す覚悟を持ちましょう。",
    "17. 星": "【意味】希望、夢、ひらめき\n【アドバイス】明るい未来を信じることで、道は開かれます。",
    "18. 月": "【意味】不安、曖昧さ\n【アドバイス】見えないものに怯えず、夜明けを待ちましょう。",
    "19. 太陽": "【意味】成功、喜び、活力\n【アドバイス】ありのままの自分を表現してください。幸運はすぐそこです。",
    "20. 審判": "【意味】復活、決断、目覚め\n【アドバイス】過去を精算し、再挑戦するのに良いタイミングです。",
    "21. 世界": "【意味】完成、達成、満足\n【アドバイス】一つのサイクルが完成します。次のステージへ進みましょう。"
}

# --- ユーザー入力 ---
with st.form(key='tarot_form'):
    user_input = st.text_area("相談内容（心の中で唱えるだけでもOKです）", height=100)
    submit_button = st.form_submit_button(label='運命のカードを引く')

# --- 占いの実行 ---
if submit_button:
    # 演出
    with st.spinner('シャッフル中...'):
        time.sleep(1.5)
        
        # カードをランダムに選ぶ
        card_name = random.choice(list(TAROT_DATA.keys()))
        card_result = TAROT_DATA[card_name]
        position = random.choice(["正位置", "逆位置"])
        
        st.divider()
        col1, col2 = st.columns([1, 2])
        
        with col1:
            # カード画像（プレースホルダー）
            st.image("https://placehold.co/200x350/222/FFF?text=Tarot", caption=card_name)
        
        with col2:
            st.subheader(f"🎴 結果: {card_name} ({position})")
            st.info(card_result)
            
            # 逆位置の場合の補足メッセージ
            if position == "逆位置":
                st.caption("※逆位置が出ました。本来の意味が過剰になったり、不足したりしているサインです。アドバイスをより慎重に捉えてください。")
